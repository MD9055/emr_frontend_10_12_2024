"use strict";(self.webpackChunkemr_proj=self.webpackChunkemr_proj||[]).push([[155],{8155:(G,c,r)=>{r.r(c),r.d(c,{AuthModule:()=>_});var g=r(177),m=r(3802),n=r(4341),o=r(8699),d=r(680),u=r(4796),p=r(5794);function v(i,a){1&i&&(o.j41(0,"div"),o.EFF(1," Email is required. "),o.k0s())}function f(i,a){1&i&&(o.j41(0,"div"),o.EFF(1," Please, enter valid email address. "),o.k0s())}function h(i,a){1&i&&(o.j41(0,"div"),o.EFF(1," Email must be at least 5 characters. "),o.k0s())}function F(i,a){1&i&&(o.j41(0,"div"),o.EFF(1," Email cannot exceed 50 characters. "),o.k0s())}function k(i,a){if(1&i&&(o.j41(0,"div",39),o.DNE(1,v,2,0,"div",40),o.DNE(2,f,2,0,"div",40),o.DNE(3,h,2,0,"div",40),o.DNE(4,F,2,0,"div",40),o.k0s()),2&i){const e=o.XpG();o.R7$(1),o.Y8G("ngIf",e.loginForm.get("email").errors.required),o.R7$(1),o.Y8G("ngIf",e.loginForm.get("email").errors.email),o.R7$(1),o.Y8G("ngIf",e.loginForm.get("email").errors.minlength),o.R7$(1),o.Y8G("ngIf",e.loginForm.get("email").errors.maxlength)}}function C(i,a){1&i&&(o.j41(0,"div"),o.EFF(1," Password is required. "),o.k0s())}function j(i,a){1&i&&(o.j41(0,"div"),o.EFF(1," Password must be at least 8 characters. "),o.k0s())}function b(i,a){1&i&&(o.j41(0,"div"),o.EFF(1," Password cannot exceed 20 characters. "),o.k0s())}function E(i,a){if(1&i&&(o.j41(0,"div",39),o.DNE(1,C,2,0,"div",40),o.DNE(2,j,2,0,"div",40),o.DNE(3,b,2,0,"div",40),o.k0s()),2&i){const e=o.XpG();o.R7$(1),o.Y8G("ngIf",e.loginForm.get("password").errors.required),o.R7$(1),o.Y8G("ngIf",e.loginForm.get("password").errors.minlength),o.R7$(1),o.Y8G("ngIf",e.loginForm.get("password").errors.maxlength)}}const w=function(){return["/forget-password"]},L=[{path:"",component:(()=>{class i{constructor(e,t,s,l,y){this.formBuilder=e,this.router=t,this.commonService=s,this.authService=l,this.toastrService=y,this.passwordClass=!1,this.errorMessage=""}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",[n.k0.required,n.k0.email,n.k0.minLength(5),n.k0.maxLength(50)]],password:["",[n.k0.required,n.k0.minLength(8),n.k0.maxLength(20)]]})}loginFormSubmit(){if(this.loginForm.valid){const e=this.loginForm.value;console.log(e),this.commonService.post("auth/login",e).subscribe(t=>{if(200===t.statusCode){console.log(t);const s=t?.token||t?.data?.token;if(s){this.authService.login(s);const l=this.commonService.decodeToken(s);console.log(l),this.toastrService.success(t.message),this.commonService.redirectBasedOnRole(l.role)}else console.error("Token not found in the response"),this.toastrService.error("Login failed: No token received")}else this.toastrService.error(t.message)},t=>{this.errorMessage="Login failed. Please try again."})}else this.errorMessage="Please fill in all fields correctly."}togglePassword(){this.passwordClass=!this.passwordClass}get formControls(){return this.loginForm.controls}isValidInput(e){return this.formControls[e].touched&&this.formControls[e].valid}isInvalidInput(e){return this.formControls[e].touched&&this.formControls[e].invalid}static{this.\u0275fac=function(t){return new(t||i)(o.rXU(n.ok),o.rXU(m.Ix),o.rXU(d.h),o.rXU(u.u),o.rXU(p.tw))}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-login"]],decls:55,vars:8,consts:[[1,"main-wrapper","login-body"],[1,"container-fluid","px-0"],[1,"row"],[1,"col-lg-6","login-wrap"],[1,"login-sec"],[1,"log-img"],["src","assets/img/login-02.png","alt","Logo",1,"img-fluid"],[1,"col-lg-6","login-wrap-bg"],[1,"login-wrapper"],[1,"loginbox"],[1,"login-right"],[1,"login-right-wrap"],[1,"account-logo"],["src","assets/img/login-logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","Email"],[1,"login-danger"],["formControlName","email","type","text",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","Password"],["formControlName","password",1,"form-control","pass-input",3,"type"],["tabindex","0",1,"profile-views","toggle-password",3,"ngClass","click","keyup.enter"],[1,"forgotpass"],[1,"remember-me"],[1,"custom_check","mr-2","mb-0","d-inline-flex","remember-me"],["type","checkbox","name","radio"],[1,"checkmark"],[3,"routerLink"],[1,"form-group","login-btn"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"next-sign"],[1,"account-subtitle"],["routerLink","/register"],[1,"social-login"],["href","javascript:;"],["src","assets/img/icons/login-icon-01.svg","alt",""],["src","assets/img/icons/login-icon-02.svg","alt",""],["src","assets/img/icons/login-icon-03.svg","alt",""],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,s){1&t&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),o.nrm(6,"img",6),o.k0s()()(),o.j41(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),o.nrm(13,"img",13),o.k0s(),o.j41(14,"h2"),o.EFF(15,"Login"),o.k0s(),o.j41(16,"form",14),o.bIt("ngSubmit",function(){return s.loginFormSubmit()}),o.j41(17,"div",15)(18,"label",16),o.EFF(19,"Email "),o.j41(20,"span",17),o.EFF(21,"*"),o.k0s()(),o.nrm(22,"input",18),o.DNE(23,k,5,4,"div",19),o.k0s(),o.j41(24,"div",15)(25,"label",20),o.EFF(26,"Password "),o.j41(27,"span",17),o.EFF(28,"*"),o.k0s()(),o.nrm(29,"input",21),o.j41(30,"span",22),o.bIt("click",function(){return s.togglePassword()})("keyup.enter",function(){return s.togglePassword()}),o.k0s(),o.DNE(31,E,4,3,"div",19),o.k0s(),o.j41(32,"div",23)(33,"div",24)(34,"label",25),o.EFF(35," Remember me "),o.nrm(36,"input",26)(37,"span",27),o.k0s()(),o.j41(38,"a",28),o.EFF(39,"Forgot Password?"),o.k0s()(),o.j41(40,"div",29)(41,"button",30),o.EFF(42," Login "),o.k0s()()(),o.j41(43,"div",31)(44,"p",32),o.EFF(45," Need an account? "),o.j41(46,"a",33),o.EFF(47,"Sign Up"),o.k0s()(),o.j41(48,"div",34)(49,"a",35),o.nrm(50,"img",36),o.k0s(),o.j41(51,"a",35),o.nrm(52,"img",37),o.k0s(),o.j41(53,"a",35),o.nrm(54,"img",38),o.k0s()()()()()()()()()()()),2&t&&(o.R7$(16),o.Y8G("formGroup",s.loginForm),o.R7$(7),o.Y8G("ngIf",s.isInvalidInput("email")),o.R7$(6),o.Y8G("type",s.passwordClass?"text":"password"),o.R7$(1),o.Y8G("ngClass",s.passwordClass?"feather icon-eye":"feather icon-eye-off"),o.R7$(1),o.Y8G("ngIf",s.isInvalidInput("password")),o.R7$(7),o.Y8G("routerLink",o.lJ4(7,w)),o.R7$(3),o.Y8G("disabled",s.loginForm.invalid))},dependencies:[g.YU,g.bT,m.Wk,n.qT,n.me,n.BC,n.cb,n.j4,n.JD]})}}return i})()}];let I=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({imports:[m.iI.forChild(L),m.iI]})}}return i})(),_=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=o.$C({type:i})}static{this.\u0275inj=o.G2t({imports:[g.MD,I,n.YN,n.X1]})}}return i})()}}]);