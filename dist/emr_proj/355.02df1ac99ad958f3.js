"use strict";(self.webpackChunkemr_proj=self.webpackChunkemr_proj||[]).push([[355],{6355:(Mc,en,N)=>{N.r(en),N.d(en,{NoteModule:()=>Dc});var f=N(177),ke=N(3802),ki=N(5799),xi=N(467),t=N(8699),ze=N(1626),Pi=N(5312);let We=(()=>{class n{constructor(e){this.http=e,this.apiUrl=Pi.c.apiUrl}getSectionNotes(e){return this.http.get(`${this.apiUrl}/notes?data_id=${e}`)}addPatientNotes(e){return this.http.post(`${this.apiUrl}/notes/add`,e)}deleteNoteItem(e){return this.http.delete(`${this.apiUrl}/notes?id=${e}`)}getDiagnoses(e,i,o){let a=(new ze.Nl).set("page",e).set("limit",i).set("search",o);return o&&(a=a.set("search",o)),this.http.get(`${this.apiUrl}/notes/diagonosisList`,{params:a})}getMedication(e,i,o){let a=(new ze.Nl).set("page",e).set("limit",i).set("search",o);return o&&(a=a.set("search",o)),this.http.get(`${this.apiUrl}/notes/medicationList`,{params:a})}getcptcodeList(e,i,o){let a=(new ze.Nl).set("page",e).set("limit",i).set("search",o);return o&&(a=a.set("search",o)),this.http.get(`${this.apiUrl}/notes/cptcodeList`,{params:a})}addHistoryNotes(e){return this.http.post(`${this.apiUrl}/notes/history`,e)}getHistoryNotes(e){return this.http.get(`${this.apiUrl}/notes/history?user_id=${e}`)}downloadPdf(e){return this.http.get(`${this.apiUrl}/notes/downloadpdf?id=${e}`,{responseType:"blob"})}getHistoryNotesById(e){return this.http.get(`${this.apiUrl}/notes/history/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(ze.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ii=N(611);const tn=function(){return["/notes/noteadd"]},Fi=function(n,s){return{patientId:n,notesId:s}};function Ai(n,s){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"div",28),t.nrm(3,"input",40),t.k0s()(),t.j41(4,"td"),t.EFF(5),t.nI1(6,"date"),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"a",41),t.nrm(13,"i",42),t.k0s(),t.j41(14,"a",43),t.bIt("click",function(){const a=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.printPdf(a._id))}),t.nrm(15,"i",44),t.k0s(),t.j41(16,"a",43),t.bIt("click",function(){const a=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.downloadPdf(a._id))}),t.nrm(17,"i",45),t.k0s()()()}if(2&n){const e=s.$implicit,i=t.XpG();t.R7$(3),t.Y8G("value",e._id),t.R7$(2),t.JRh(t.i5U(6,7,null==e?null:e.updatedAt,"shortDate")),t.R7$(3),t.JRh(null==e?null:e.chief_complaint),t.R7$(2),t.Lme("",(null==e||null==e.doctor_id?null:e.doctor_id.firstName)||"N/A"," ",(null==e||null==e.doctor_id?null:e.doctor_id.lastName)||"N/A",""),t.R7$(2),t.Y8G("routerLink",t.lJ4(10,tn))("queryParams",t.l_i(11,Fi,i.patientId,e._id))}}function Bi(n,s){if(1&n){const e=t.RV6();t.j41(0,"li",37)(1,"a",38),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onPageChange(2))}),t.EFF(2,"2"),t.k0s()()}if(2&n){const e=t.XpG();t.AVh("active",2===e.currentPage)}}const ji=function(n){return{patientId:n}};let Gi=(()=>{class n{constructor(e,i,o){this.route=e,this.noteService=i,this.encryptionDecryptionService=o,this.list=[],this.currentPage=1,this.totalPages=1,this.totalDocs=10,this.patientId=null}ngOnInit(){this.route.queryParams.subscribe(e=>{this.patientId=e.patientId,this.patientId&&console.log("Patient ID:",this.patientId)}),this.fetchList()}fetchList(){this.noteService.getHistoryNotes(this.patientId).subscribe(e=>{200===e.statusCode&&(this.list=e.data)})}handleDownload(e,i){return(0,xi.A)(function*(){})()}onSearch(){}resetList(){}onPageChange(e){this.currentPage=e}viewNoteDetail(e){}decodeText(e){return""==e?e:this.encryptionDecryptionService.decrypt(e)}downloadPdf(e){this.noteService.downloadPdf(e).subscribe(i=>{const o=window.URL.createObjectURL(i),a=document.createElement("a");a.href=o,a.download="report.pdf",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(o)})}printPdf(e){this.noteService.downloadPdf(e).subscribe(i=>{const o=window.URL.createObjectURL(i),a=window.open(o,"_blank");a?.focus(),a?.print(),window.URL.revokeObjectURL(o)})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(ke.nX),t.rXU(We),t.rXU(Ii.g))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-notelist"]],decls:67,vars:16,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here","id","searchInput",1,"form-control"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],[1,"add-group"],[1,"btn","btn-primary","add-pluss","ms-2",3,"routerLink","queryParams"],["src","assets/img/icons/plus.svg","alt",""],[1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],[1,"table-responsive"],[1,"table","border-0","custom-table","comman-table","datatable","mb-0"],[1,"form-check","check-tables"],["type","checkbox",1,"form-check-input"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item"],["href","javascript:void(0);",1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"value"],["title","View",1,"icon-action","edit-icon",3,"routerLink","queryParams"],[1,"fa-solid","fa-edit","m-r-5"],["title","View",1,"icon-action","edit-icon",3,"click"],[1,"fa-solid","fa-print","m-r-5"],[1,"fa-solid","fa-download","m-r-5"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t.EFF(8,"Patients"),t.k0s()(),t.j41(9,"li",6),t.nrm(10,"i",8),t.k0s(),t.j41(11,"li",9),t.EFF(12,"Patients Note History"),t.k0s()()()()(),t.j41(13,"div",3)(14,"div",4)(15,"div",10)(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15)(21,"h3"),t.EFF(22,"Patients Note History List"),t.k0s(),t.j41(23,"div",16)(24,"div",17),t.nrm(25,"input",18),t.j41(26,"a",19),t.nrm(27,"img",20),t.k0s()(),t.j41(28,"div",21)(29,"a",22),t.nrm(30,"img",23),t.k0s(),t.j41(31,"a",24),t.bIt("click",function(){return o.resetList()}),t.nrm(32,"img",25),t.k0s()()()()()()(),t.j41(33,"div",26)(34,"table",27)(35,"thead")(36,"tr")(37,"th")(38,"div",28),t.nrm(39,"input",29),t.k0s()(),t.j41(40,"th"),t.EFF(41,"Date"),t.k0s(),t.j41(42,"th"),t.EFF(43,"Chief Complaint"),t.k0s(),t.j41(44,"th"),t.EFF(45,"Added By"),t.k0s(),t.j41(46,"th"),t.EFF(47,"Actions"),t.k0s()()(),t.j41(48,"tbody"),t.DNE(49,Ai,18,14,"tr",30),t.k0s()(),t.j41(50,"div",31)(51,"div",32)(52,"div",33),t.EFF(53),t.k0s()(),t.j41(54,"div",34)(55,"div",35)(56,"ul",36)(57,"li",37)(58,"a",38),t.bIt("click",function(){return o.onPageChange(o.currentPage-1)}),t.EFF(59,"Previous"),t.k0s()(),t.j41(60,"li",37)(61,"a",38),t.bIt("click",function(){return o.onPageChange(1)}),t.EFF(62,"1"),t.k0s()(),t.DNE(63,Bi,3,2,"li",39),t.j41(64,"li",37)(65,"a",38),t.bIt("click",function(){return o.onPageChange(o.currentPage+1)}),t.EFF(66,"Next"),t.k0s()()()()()()()()()()()()()),2&i&&(t.R7$(29),t.Y8G("routerLink",t.lJ4(13,tn))("queryParams",t.eq3(14,ji,o.patientId)),t.R7$(20),t.Y8G("ngForOf",o.list),t.R7$(4),t.E5c(" Showing ",10*(o.currentPage-1)+1," to ",10*o.currentPage>o.totalDocs?o.totalDocs:10*o.currentPage," of ",o.totalDocs," entries "),t.R7$(4),t.AVh("disabled",1===o.currentPage),t.R7$(3),t.AVh("active",1===o.currentPage),t.R7$(3),t.Y8G("ngIf",o.totalPages>1),t.R7$(1),t.AVh("disabled",o.currentPage===o.totalPages))},dependencies:[f.Sq,f.bT,ke.Wk,f.vh]})}}return n})();var b=N(4341),x=N(1413),vt=N(152),Xe=N(3294),yt=N(1985),nn=N(983),Dt=N(7673),j=N(3726),on=N(1584),Je=N(8750);const{isArray:$i}=Array;function sn(n){return 1===n.length&&$i(n[0])?n[0]:n}var Ct=N(4360);N(7786);var Vi=N(9326);function Nt(...n){const s=(0,Vi.ms)(n),e=sn(n);return e.length?new yt.c(i=>{let o=e.map(()=>[]),a=e.map(()=>!1);i.add(()=>{o=a=null});for(let r=0;!i.closed&&r<e.length;r++)(0,Je.Tg)(e[r]).subscribe((0,Ct._)(i,l=>{if(o[r].push(l),o.every(c=>c.length)){const c=o.map(u=>u.shift());i.next(s?s(...c):c),o.some((u,d)=>!u.length&&a[d])&&i.complete()}},()=>{a[r]=!0,!o[r].length&&i.complete()}));return()=>{o=a=null}}):nn.w}var rn=N(8793),k=N(6977),ee=N(5964),X=N(6697),ln=N(8141),xe=N(6354),Tt=N(3993);N(3236),N(9974),N(5343),N(3703),N(1397);var Ki=N(5558);N(9172),Math,Math,Math;const ps=["*"],Us=["dialog"];function Oe(n){return"string"==typeof n}function de(n){return null!=n}function we(n){return(n||document.body).getBoundingClientRect()}const Rn={animation:!0,transitionTimerDelayMs:5},Ia=()=>{},{transitionTimerDelayMs:Fa}=Rn,Ge=new Map,U=(n,s,e,i)=>{let o=i.context||{};const a=Ge.get(s);if(a)switch(i.runningTransition){case"continue":return nn.w;case"stop":n.run(()=>a.transition$.complete()),o=Object.assign(a.context,o),Ge.delete(s)}const r=e(s,i.animation,o)||Ia;if(!i.animation||"none"===window.getComputedStyle(s).transitionProperty)return n.run(()=>r()),(0,Dt.of)(void 0).pipe(function xa(n){return s=>new yt.c(e=>s.subscribe({next:r=>n.run(()=>e.next(r)),error:r=>n.run(()=>e.error(r)),complete:()=>n.run(()=>e.complete())}))}(n));const l=new x.B,c=new x.B,u=l.pipe(function Li(...n){return s=>(0,rn.x)(s,(0,Dt.of)(...n))}(!0));Ge.set(s,{transition$:l,complete:()=>{c.next(),c.complete()},context:o});const d=function Pa(n){const{transitionDelay:s,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(s)+parseFloat(e))}(s);return n.runOutsideAngular(()=>{const _=(0,j.R)(s,"transitionend").pipe((0,k.Q)(u),(0,ee.p)(({target:h})=>h===s));(function an(...n){return 1===(n=sn(n)).length?(0,Je.Tg)(n[0]):new yt.c(function Hi(n){return s=>{let e=[];for(let i=0;e&&!s.closed&&i<n.length;i++)e.push((0,Je.Tg)(n[i]).subscribe((0,Ct._)(s,o=>{if(e){for(let a=0;a<e.length;a++)a!==i&&e[a].unsubscribe();e=null}s.next(o)})))}}(n))})((0,on.O)(d+Fa).pipe((0,k.Q)(u)),_,c).pipe((0,k.Q)(u)).subscribe(()=>{Ge.delete(s),n.run(()=>{r(),l.next(),l.complete()})})}),l.asObservable()};let et=(()=>{class n{constructor(){this.animation=Rn.animation}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var E=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(E||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Wn=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Xn(n){const s=Array.from(n.querySelectorAll(Wn)).filter(e=>-1!==e.tabIndex);return[s[0],s[s.length-1]]}new Date(1882,10,12),new Date(2174,10,25);class ge{constructor(s,e,i){this.nodes=s,this.viewRef=e,this.componentRef=i}}let $r=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe((0,X.s)(1)).subscribe(()=>{U(this._zone,this._el.nativeElement,(e,i)=>{i&&we(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return U(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(t.aKT),t.rXU(t.SKi))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,o){2&i&&(t.HbH("modal-backdrop"+(o.backdropClass?" "+o.backdropClass:"")),t.AVh("show",!o.animation)("fade",o.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[t.aNF],decls:0,vars:0,template:function(i,o){},encapsulation:2})}}return n})();class pt{update(s){}close(s){}dismiss(s){}}const Hr=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Ur=["animation","backdropClass"];class Vr{_applyWindowOptions(s,e){Hr.forEach(i=>{de(e[i])&&(s[i]=e[i])})}_applyBackdropOptions(s,e){Ur.forEach(i=>{de(e[i])&&(s[i]=e[i])})}update(s){this._applyWindowOptions(this._windowCmptRef.instance,s),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,s)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,k.Q)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,k.Q)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(s,e,i,o){this._windowCmptRef=s,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=o,this._closed=new x.B,this._dismissed=new x.B,this._hidden=new x.B,s.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,r)=>{this._resolve=a,this._reject=r}),this.result.then(null,()=>{})}close(s){this._windowCmptRef&&(this._closed.next(s),this._resolve(s),this._removeModalElements())}_dismiss(s){this._dismissed.next(s),this._reject(s),this._removeModalElements()}dismiss(s){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function En(n){return n&&n.then}(e)?!1!==e&&this._dismiss(s):e.then(i=>{!1!==i&&this._dismiss(s)},()=>{})}else this._dismiss(s)}_removeModalElements(){const s=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Dt.of)(void 0);s.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Nt(s,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Xt=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(Xt||{});let Lr=(()=>{class n{constructor(e,i,o){this._document=e,this._elRef=i,this._zone=o,this._closed$=new x.B,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new t.bkB,this.shown=new x.B,this.hidden=new x.B}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Oe(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,X.s)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=Nt(U(this._zone,e,()=>e.classList.remove("show"),i),U(this._zone,this._dialogEl.nativeElement,()=>{},i));return r.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),r}_show(){const e={animation:this.animation,runningTransition:"continue"};Nt(U(this._zone,this._elRef.nativeElement,(a,r)=>{r&&we(a),a.classList.add("show")},e),U(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{(0,j.R)(e,"keydown").pipe((0,k.Q)(this._closed$),(0,ee.p)(o=>o.which===E.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(Xt.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;(0,j.R)(this._dialogEl.nativeElement,"mousedown").pipe((0,k.Q)(this._closed$),(0,ln.M)(()=>i=!1),(0,Ki.n)(()=>(0,j.R)(e,"mouseup").pipe((0,k.Q)(this._closed$),(0,X.s)(1))),(0,ee.p)(({target:o})=>e===o)).subscribe(()=>{i=!0}),(0,j.R)(e,"click").pipe((0,k.Q)(this._closed$)).subscribe(({target:o})=>{e===o&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Xt.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),o=Xn(e)[0];(i||o||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let o;o=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&U(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(f.qQ),t.rXU(t.aKT),t.rXU(t.SKi))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,o){if(1&i&&t.GBs(Us,7),2&i){let a;t.mGM(a=t.lsd())&&(o._dialogEl=a.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,o){2&i&&(t.BMQ("aria-modal",!0)("aria-labelledby",o.ariaLabelledBy)("aria-describedby",o.ariaDescribedBy),t.HbH("modal d-block"+(o.windowClass?" "+o.windowClass:"")),t.AVh("fade",o.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[t.aNF],ngContentSelectors:ps,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,o){1&i&&(t.NAR(),t.j41(0,"div",0,1)(2,"div",2),t.SdG(3),t.k0s()()),2&i&&t.HbH("modal-dialog"+(o.size?" modal-"+o.size:"")+(o.centered?" modal-dialog-centered":"")+o.fullscreenClass+(o.scrollable?" modal-dialog-scrollable":"")+(o.modalDialogClass?" "+o.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}}return n})(),Yr=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,o=i.style,{overflow:a,paddingRight:r}=o;if(e>0){const l=parseFloat(window.getComputedStyle(i).paddingRight);o.paddingRight=`${l+e}px`}return o.overflow="hidden",()=>{e>0&&(o.paddingRight=r),o.overflow=a}}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(f.qQ))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zr=(()=>{class n{constructor(e,i,o,a,r,l,c){this._applicationRef=e,this._injector=i,this._environmentInjector=o,this._document=a,this._scrollBar=r,this._rendererFactory=l,this._ngZone=c,this._activeWindowCmptHasChanged=new x.B,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new t.bkB,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const u=this._windowCmpts[this._windowCmpts.length-1];((n,s,e,i=!1)=>{n.runOutsideAngular(()=>{const o=(0,j.R)(s,"focusin").pipe((0,k.Q)(e),(0,xe.T)(a=>a.target));(0,j.R)(s,"keydown").pipe((0,k.Q)(e),(0,ee.p)(a=>a.which===E.Tab),(0,Tt.E)(o)).subscribe(([a,r])=>{const[l,c]=Xn(s);(r===l||r===s)&&a.shiftKey&&(c.focus(),a.preventDefault()),r===c&&!a.shiftKey&&(l.focus(),a.preventDefault())}),i&&(0,j.R)(s,"click").pipe((0,k.Q)(e),(0,Tt.E)(o),(0,xe.T)(a=>a[1])).subscribe(a=>a.focus())})})(this._ngZone,u.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(u.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,o){const a=o.container instanceof HTMLElement?o.container:de(o.container)?this._document.querySelector(o.container):this._document.body,r=this._rendererFactory.createRenderer(null,null);if(!a)throw new Error(`The specified modal container "${o.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const l=new pt,c=(e=o.injector||e).get(t.uvJ,null)||this._environmentInjector,u=this._getContentRef(e,c,i,l,o);let d=!1!==o.backdrop?this._attachBackdrop(a):void 0,_=this._attachWindowComponent(a,u.nodes),p=new Vr(_,u,d,o.beforeDismiss);return this._registerModalRef(p),this._registerWindowCmpt(_),p.hidden.pipe((0,X.s)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(r.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),l.close=h=>{p.close(h)},l.dismiss=h=>{p.dismiss(h)},l.update=h=>{p.update(h)},p.update(o),1===this._modalRefs.length&&r.addClass(this._document.body,"modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),_.changeDetectorRef.detectChanges(),p}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let i=(0,t.a0P)($r,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_attachWindowComponent(e,i){let o=(0,t.a0P)(Lr,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(o.hostView),e.appendChild(o.location.nativeElement),o}_getContentRef(e,i,o,a,r){return o?o instanceof t.C4Q?this._createFromTemplateRef(o,a):Oe(o)?this._createFromString(o):this._createFromComponent(e,i,o,a,r):new ge([])}_createFromTemplateRef(e,i){const a=e.createEmbeddedView({$implicit:i,close(r){i.close(r)},dismiss(r){i.dismiss(r)}});return this._applicationRef.attachView(a),new ge([a.rootNodes],a)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new ge([[i]])}_createFromComponent(e,i,o,a,r){const l=t.zZn.create({providers:[{provide:pt,useValue:a}],parent:e}),c=(0,t.a0P)(o,{environmentInjector:i,elementInjector:l}),u=c.location.nativeElement;return r.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new ge([[u]],c.hostView,c)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(o=>{o!==e&&"SCRIPT"!==o.nodeName&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const o=this._modalRefs.indexOf(e);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(t.o8S),t.KVO(t.zZn),t.KVO(t.uvJ),t.KVO(f.qQ),t.KVO(Yr),t.KVO(t._9s),t.KVO(t.SKi))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wr=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(et))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ci=(()=>{class n{constructor(e,i,o){this._injector=e,this._modalStack=i,this._config=o}open(e,i={}){const o={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,e,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||n)(t.KVO(t.zZn),t.KVO(zr),t.KVO(Wr))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();new t.nKC("live announcer delay",{providedIn:"root",factory:function bl(){return 100}});var ie=N(9818);function Dl(n,s){if(1&n){const e=t.RV6();t.j41(0,"ul",25)(1,"li",26)(2,"div",27)(3,"input",28),t.bIt("change",function(){const a=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.handleSelectDonor(a))}),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"button",29),t.bIt("click",function(){const a=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.openModal(a))}),t.nrm(6,"i",30),t.k0s()()()}if(2&n){const e=s.$implicit,i=t.XpG(2);t.R7$(3),t.Y8G("checked",i.checkedDonorItems.includes(e.description)),t.R7$(1),t.SpI(" ",e.name," ")}}function Cl(n,s){if(1&n&&(t.j41(0,"div",22)(1,"div",23),t.DNE(2,Dl,7,2,"ul",24),t.k0s()()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.notes)}}function Nl(n,s){if(1&n&&(t.j41(0,"div",34),t.EFF(1),t.k0s()),2&n){const e=s.item;t.R7$(1),t.SpI(" ",e.PsnDrugDescription," ")}}function Tl(n,s){if(1&n){const e=t.RV6();t.j41(0,"span",37),t.EFF(1),t.j41(2,"button",38),t.bIt("click",function(){const a=t.eBV(e).$implicit,r=t.XpG(3);return t.Njj(r.removeItem(a))}),t.EFF(3," \u2716 "),t.k0s()()}if(2&n){const e=s.$implicit;t.R7$(1),t.SpI(" ",e.PsnDrugDescription," ")}}function Ol(n,s){if(1&n&&(t.j41(0,"div",35),t.DNE(1,Tl,4,1,"span",36),t.k0s()),2&n){const e=s.items;t.R7$(1),t.Y8G("ngForOf",e)}}const wl=function(){return{standalone:!0}};function El(n,s){if(1&n){const e=t.RV6();t.j41(0,"ng-select",31),t.bIt("change",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.onSelectionChange(o))})("scrollToEnd",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.loadMoreItems())})("search",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.onSearch(o))})("ngModelChange",function(o){t.eBV(e);const a=t.XpG();return t.Njj(a.patientSelectedIds=o)}),t.DNE(1,Nl,2,1,"ng-template",32),t.DNE(2,Ol,2,1,"ng-template",33),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("items",e.diagnosisList)("bindLabel","PsnDrugDescription")("bindValue","_id")("multiple",!0)("searchable",!0)("loading",e.loading)("ngModel",e.patientSelectedIds)("ngModelOptions",t.lJ4(8,wl))}}function Ml(n,s){1&n&&(t.j41(0,"h5",9),t.EFF(1,"Add Note"),t.k0s())}function Sl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Name is required. "),t.k0s())}function Rl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Name must be at least 3 characters. "),t.k0s())}function kl(n,s){if(1&n&&(t.j41(0,"div",46),t.DNE(1,Sl,2,0,"div",47),t.DNE(2,Rl,2,0,"div",47),t.k0s()),2&n){const e=t.XpG(2);let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("name"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("name"))||null==o.errors?null:o.errors.minlength)}}function xl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Description is required. "),t.k0s())}function Pl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Description must be at least 10 characters. "),t.k0s())}function Il(n,s){if(1&n&&(t.j41(0,"div",46),t.DNE(1,xl,2,0,"div",47),t.DNE(2,Pl,2,0,"div",47),t.k0s()),2&n){const e=t.XpG(2);let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("description"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("description"))||null==o.errors?null:o.errors.minlength)}}const yi=function(n){return{"is-invalid":n}};function Fl(n,s){if(1&n){const e=t.RV6();t.j41(0,"form",39),t.bIt("ngSubmit",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.onAddItem())}),t.j41(1,"div",10)(2,"label",40),t.EFF(3,"Name"),t.k0s(),t.nrm(4,"input",41),t.DNE(5,kl,3,2,"div",42),t.k0s(),t.j41(6,"div",10)(7,"label",43),t.EFF(8,"Description"),t.k0s(),t.nrm(9,"textarea",44),t.DNE(10,Il,3,2,"div",42),t.k0s(),t.j41(11,"button",45),t.EFF(12),t.k0s()()}if(2&n){const e=t.XpG();let i,o,a,r;t.Y8G("formGroup",e.itemForm),t.R7$(4),t.Y8G("ngClass",t.eq3(7,yi,(null==(i=e.getControl("name"))?null:i.touched)&&(null==(i=e.getControl("name"))?null:i.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(o=e.getControl("name"))?null:o.touched)&&(null==(o=e.getControl("name"))?null:o.invalid)),t.R7$(4),t.Y8G("ngClass",t.eq3(9,yi,(null==(a=e.getControl("description"))?null:a.touched)&&(null==(a=e.getControl("description"))?null:a.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(r=e.getControl("description"))?null:r.touched)&&(null==(r=e.getControl("description"))?null:r.invalid)),t.R7$(1),t.Y8G("disabled",e.isLoading),t.R7$(1),t.SpI(" ",e.isLoading?"Adding...":"Add Item"," ")}}function Al(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",48)(1,"div",49)(2,"h3"),t.EFF(3,"Confirm Delete"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Are you sure you want to delete this item?"),t.k0s(),t.j41(6,"div",50)(7,"button",51),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.closeModal())}),t.EFF(8,"No"),t.k0s(),t.j41(9,"button",52),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.confirmDelete())}),t.EFF(10,"Yes"),t.k0s()()()()}}let Bl=(()=>{class n{constructor(e,i,o){this.activeModal=e,this.noteService=i,this.fb=o,this.close=new t.bkB,this.diagnosisList=[],this.currentPage=1,this.limit=20,this.searchQuery="",this.searchSubject=new x.B,this.patientSelectedIds=[],this.loading=!1,this.diagnosisData=[],this.notes=[],this.isLoading=!1,this.textAreaData="",this.checkedDonorItems=[],this.isModalOpen=!1,this.patientList=[],this.row=8}ngOnInit(){this.fetchPatients(this.noteType),this.itemForm=this.fb.group({name:["",[b.k0.required,b.k0.minLength(3)]],description:["",[b.k0.required,b.k0.minLength(10)]]}),this.getDiagnosis(),this.searchSubject.pipe((0,vt.B)(300),(0,Xe.F)()).subscribe(e=>{this.searchQuery=e,this.currentPage=1,this.diagnosisList=[],this.getDiagnosis()}),"currentMedication"==this.noteType?(this.row=20,this.patientSelectedIds=this.noteData.filter(e=>null!=e._id).map(e=>e._id),this.diagnosisData=this.noteData,this.textAreaData=this.noteData.map(e=>`${e.PsnDrugDescription}`).join("\n"),this.diagnosisList=[...new Set([...this.diagnosisList,...this.diagnosisData])]):""!=this.noteData&&(this.checkedDonorItems=this.noteData.split("\n").filter(e=>""!==e.trim()),this.textAreaData=this.checkedDonorItems.join("\n"))}handleClose(){this.activeModal.dismiss("Modal closed by user")}handleSubmit(){const e={noteType:this.noteType,notes:this.textAreaData};"currentMedication"==this.noteType&&(e.notes=this.diagnosisData),this.activeModal.close(e)}fetchPatients(e){this.noteService.getSectionNotes(e).subscribe({next:i=>{200==i?.statusCode&&(console.log("Item added successfully:",i),this.notes=i.data)},error:i=>{console.error("Error adding item:",i)}})}handleSelectDonor(e){this.checkedDonorItems.includes(e.description)?this.checkedDonorItems=this.checkedDonorItems.filter(i=>i!==e.description):this.checkedDonorItems.push(e.description),this.textAreaData=this.checkedDonorItems.join("\n")}getControl(e){return this.itemForm.get(e)}onAddItem(){if(this.itemForm.invalid)return void this.itemForm.markAllAsTouched();this.isLoading=!0;const e=this.itemForm.value;e.data_id=this.noteType,this.noteService.addPatientNotes(e).subscribe({next:i=>{200==i.statusCode&&(console.log("Item added successfully:",i),this.isLoading=!1,this.itemForm.reset(),this.fetchPatients(this.noteType))},error:i=>{console.error("Error adding item:",i),this.isLoading=!1}})}openModal(e){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}confirmDelete(){this.closeModal()}getDiagnosis(){this.loading=!0,this.noteService.getMedication(this.currentPage,this.limit,this.searchQuery).subscribe(e=>{this.diagnosisList=1===this.currentPage?e.data.data:[...this.diagnosisList,...e.data.data],this.loading=!1},e=>{console.error("Error fetching diagnoses:",e),this.loading=!1})}onSearch(e){this.searchSubject.next(e.term)}loadMoreItems(){this.currentPage++,this.getDiagnosis()}onSelectionChange(e=[]){this.diagnosisData=[],this.textAreaData=e.map(i=>`${i.PsnDrugDescription}`).join("\n"),this.diagnosisData=e}removeItem(e){console.log("item",e),this.patientSelectedIds=this.patientSelectedIds.filter(i=>i!==e._id),this.diagnosisData=this.diagnosisData.filter(i=>i._id!==e._id),this.diagnosisList=[...new Set([...this.diagnosisList,...this.diagnosisData])],this.textAreaData=this.diagnosisData.map(i=>`${i.PsnDrugDescription}`).join("\n")}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(pt),t.rXU(We),t.rXU(b.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-add-modal"]],inputs:{noteType:"noteType",noteData:"noteData"},outputs:{close:"close"},decls:29,vars:10,consts:[["tabindex","-1","aria-labelledby","modal-title","aria-hidden","true",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header","custom-modal-header"],["id","modal-title",1,"modal-title"],[1,"card","custom-card","shadow-sm"],[1,"card-body"],[1,"row"],[1,"col-md-6","border-end"],[1,"section-title","mb-3"],[1,"form-group","mb-3"],[1,"col-md-12"],["class","list-container",4,"ngIf"],["id","patients","class","form-control custom-ng-select",3,"items","bindLabel","bindValue","multiple","searchable","loading","ngModel","ngModelOptions","change","scrollToEnd","search","ngModelChange",4,"ngIf"],[1,"col-md-6"],["class","section-title mb-3",4,"ngIf"],["class","mb-4",3,"formGroup","ngSubmit",4,"ngIf"],["placeholder","Items will be taken here...",1,"form-control",3,"rows","ngModel","ngModelChange"],[1,"modal-footer","custom-modal-footer"],["type","button",1,"btn","btn-secondary","custom-btn-secondary",3,"click"],["type","button",1,"btn","btn-primary","custom-btn-primary",3,"click"],["class","custom-modal-overlay",4,"ngIf"],[1,"list-container"],[1,"list-box"],["class","list-group",4,"ngFor","ngForOf"],[1,"list-group"],[1,"list-group-item","d-flex","align-items-center","justify-content-between"],[1,"item-details"],["type","checkbox",1,"checkbox","me-2",3,"checked","change"],[1,"btn","text-danger",3,"click"],[1,"fas","fa-trash-alt"],["id","patients",1,"form-control","custom-ng-select",3,"items","bindLabel","bindValue","multiple","searchable","loading","ngModel","ngModelOptions","change","scrollToEnd","search","ngModelChange"],["ng-option-tmp",""],["ng-multi-label-tmp",""],[1,"custom-option"],[1,"selected-items"],["style","color: black",4,"ngFor","ngForOf"],[2,"color","black"],["type","button",1,"close-btn",3,"click"],[1,"mb-4",3,"formGroup","ngSubmit"],["for","name",1,"form-label"],["id","name","formControlName","name","type","text","placeholder","Enter name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","placeholder","Enter description",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[1,"custom-modal-overlay"],[1,"custom-modal"],[1,"modal-actions"],[1,"btn","cancel",3,"click"],[1,"btn","confirm",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t.EFF(5),t.nI1(6,"uppercase"),t.k0s()(),t.j41(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h5",9),t.EFF(12,"Available Notes"),t.k0s(),t.j41(13,"div",10)(14,"div",11),t.DNE(15,Cl,3,1,"div",12),t.DNE(16,El,3,9,"ng-select",13),t.k0s()()(),t.j41(17,"div",14),t.DNE(18,Ml,2,0,"h5",15),t.DNE(19,Fl,13,11,"form",16),t.j41(20,"h5",9),t.EFF(21,"Taker Items"),t.k0s(),t.j41(22,"textarea",17),t.bIt("ngModelChange",function(r){return o.textAreaData=r}),t.k0s()()()()(),t.j41(23,"div",18)(24,"button",19),t.bIt("click",function(){return o.handleClose()}),t.EFF(25," Close "),t.k0s(),t.j41(26,"button",20),t.bIt("click",function(){return o.handleSubmit()}),t.EFF(27," Confirm "),t.k0s()()()(),t.DNE(28,Al,11,0,"div",21),t.k0s()),2&i&&(t.R7$(5),t.SpI(" ADD ",t.bMT(6,8,o.noteType)," "),t.R7$(10),t.Y8G("ngIf","currentMedication"!=o.noteType),t.R7$(1),t.Y8G("ngIf","currentMedication"==o.noteType),t.R7$(2),t.Y8G("ngIf","currentMedication"!=o.noteType),t.R7$(1),t.Y8G("ngIf","currentMedication"!=o.noteType),t.R7$(3),t.Y8G("rows",o.row)("ngModel",o.textAreaData),t.R7$(6),t.Y8G("ngIf",o.isModalOpen))},dependencies:[f.YU,f.Sq,f.bT,b.qT,b.me,b.BC,b.cb,b.vS,b.j4,b.JD,ie.vr,ie.Uq,ie.EY,f.Pc],styles:[".custom-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f8f9fa;border-bottom:2px solid #007bff;padding:15px 20px}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#007bff;margin:0}.btn-close[_ngcontent-%COMP%]{background-color:#ff4d4f;border:none;color:#fff;padding:5px 10px;font-size:1.2rem;cursor:pointer;border-radius:4px;transition:background-color .3s ease}.btn-close[_ngcontent-%COMP%]:hover{background-color:#c00}.custom-modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;background-color:#f8f9fa;border-top:2px solid #007bff;padding:15px 20px}.custom-btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border:none;color:#fff;padding:10px 15px;font-size:1rem;border-radius:4px;transition:background-color .3s ease}.custom-btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.custom-btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:10px 15px;font-size:1rem;border-radius:4px;transition:background-color .3s ease;margin-left:10px}.custom-btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.custom-card[_ngcontent-%COMP%]{border-radius:0;background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;color:#000;margin-bottom:15px}.card[_ngcontent-%COMP%]{margin-bottom:0!important}.custom-ng-select-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px auto;position:relative}.ng-select[_ngcontent-%COMP%]{width:100%;border-radius:12px;font-size:16px;box-shadow:0 4px 6px #0000001a}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{min-height:60px;border:2px solid #007bff;border-radius:12px;background-color:#f9f9f9;display:flex;align-items:center}.ng-select[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;padding-left:10px}.ng-select[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;padding:5px}.ng-select[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#e3f2fd;border:1px solid #90caf9;border-radius:16px;padding:5px 10px;display:flex;align-items:center;gap:5px;font-size:14px}.ng-select[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;color:red;cursor:pointer;transition:color .3s}.ng-select[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#c62828}.ng-select[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 10px #0003}.ng-select[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]{font-size:16px;padding:10px 15px;transition:background-color .3s,color .3s}.ng-select[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.ng-select[_ngcontent-%COMP%]   .ng-option.ng-option-selected[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#007bff}.ng-select.form-control[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem;line-height:1.5;border:1px solid #ced4da;border-radius:.25rem;box-shadow:inset 0 1px 2px #00000013}.ng-select.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background-color:#f8f9fa;border:1px solid #ced4da;border-radius:.25rem;padding:.25rem .5rem;margin-right:.25rem}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-left:.5rem;border:none;background:none;cursor:pointer;font-size:1rem;color:#dc3545;transition:color .3s}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#a71d2a}.ng-dropdown-panel[_ngcontent-%COMP%]{z-index:1050;position:absolute;max-height:300px;overflow-y:auto}.custom-ng-select-container[_ngcontent-%COMP%]{position:relative;overflow:visible}.custom-ng-select[_ngcontent-%COMP%]{--background: white;--border-color: #ccc;--option-hover-color: #f1f1f1;--text-color: black;width:100%}.custom-option[_ngcontent-%COMP%]{padding:10px;background-color:var(--background);color:var(--text-color);border:1px solid var(--border-color);margin:5px 0;border-radius:5px;transition:background-color .3s ease;cursor:pointer}.custom-option[_ngcontent-%COMP%]:hover{background-color:var(--option-hover-color)}.ng-dropdown-panel[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;background-color:var(--background);border:1px solid var(--border-color);border-radius:5px;padding:5px;box-shadow:0 2px 8px #0003}.selected-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:red;font-size:14px;margin-left:5px;cursor:pointer}.custom-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.custom-modal[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;text-align:center;max-width:400px;width:100%;box-shadow:0 4px 6px #0000001a}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:20px}.modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;cursor:pointer;border-radius:4px}.modal-actions[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]{background-color:#ccc}.modal-actions[_ngcontent-%COMP%]   .btn.confirm[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}"]})}}return n})();function jl(n,s){if(1&n&&(t.j41(0,"div",17),t.EFF(1),t.k0s()),2&n){const e=s.item;t.R7$(1),t.Lme(" (",e.code,") ",e.desc," ")}}function Gl(n,s){if(1&n){const e=t.RV6();t.j41(0,"span",20),t.EFF(1),t.j41(2,"button",21),t.bIt("click",function(){const a=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.removeItem(a))}),t.EFF(3," \u2716 "),t.k0s()()}if(2&n){const e=s.$implicit;t.R7$(1),t.Lme(" (",e.code,") ",e.desc," ")}}function $l(n,s){if(1&n&&(t.j41(0,"div",18),t.DNE(1,Gl,4,2,"span",19),t.k0s()),2&n){const e=s.items;t.R7$(1),t.Y8G("ngForOf",e)}}function Hl(n,s){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s()()),2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.cpt),t.R7$(2),t.JRh(e.icd1),t.R7$(2),t.JRh(e.icd2),t.R7$(2),t.JRh(e.icd3),t.R7$(2),t.JRh(e.icd4)}}const Ul=function(){return{standalone:!0}};let Vl=(()=>{class n{constructor(e,i,o){this.activeModal=e,this.noteService=i,this.fb=o,this.diagnosisList=[],this.currentPage=1,this.limit=20,this.searchQuery="",this.searchSubject=new x.B,this.patientSelectedIds=[],this.loading=!1,this.diagnosisData=[],this.tableData=[]}ngOnInit(){this.getDiagnosis(),this.searchSubject.pipe((0,vt.B)(300),(0,Xe.F)()).subscribe(e=>{this.searchQuery=e,this.currentPage=1,this.diagnosisList=[],this.getDiagnosis()}),this.cptData.length>0&&(this.patientSelectedIds=this.cptData.filter(e=>null!=e._id).map(e=>e._id),this.diagnosisData=this.cptData,this.diagnosisList=[...new Set([...this.diagnosisList,...this.diagnosisData])],this.diagnosisData.map((e,i)=>{this.tableData[i]={cpt:e.code,icd1:this.noteData.length>0?this.noteData[0]?.code:null,icd2:this.noteData.length>1?this.noteData[1]?.code:null,icd3:this.noteData.length>2?this.noteData[2]?.code:null,icd4:this.noteData.length>3?this.noteData[3]?.code:null}}))}handleClose(){this.activeModal.dismiss("Modal closed by user")}getDiagnosis(){this.loading=!0,this.noteService.getcptcodeList(this.currentPage,this.limit,this.searchQuery).subscribe(e=>{this.diagnosisList=1===this.currentPage?e.data.data:[...this.diagnosisList,...e.data.data],this.loading=!1},e=>{console.error("Error fetching diagnoses:",e),this.loading=!1})}onSearch(e){this.searchSubject.next(e.term)}loadMoreItems(){this.currentPage++,this.getDiagnosis()}onSelectionChange(e=[]){this.diagnosisData=[],this.diagnosisData=e,this.diagnosisData.map((i,o)=>{this.tableData[o]={cpt:i.code,icd1:this.noteData.length>0?this.noteData[0]?.code:null,icd2:this.noteData.length>1?this.noteData[1]?.code:null,icd3:this.noteData.length>2?this.noteData[2]?.code:null,icd4:this.noteData.length>3?this.noteData[3]?.code:null}})}removeItem(e){this.patientSelectedIds=this.patientSelectedIds.filter(i=>i!==e._id),this.diagnosisData=this.diagnosisData.filter(i=>i._id!==e._id),this.tableData=[],this.diagnosisList=[...new Set([...this.diagnosisList,...this.diagnosisData])],this.diagnosisData.map((i,o)=>{this.tableData[o]={cpt:i.code,icd1:this.noteData.length>0?this.noteData[0]?.code:null,icd2:this.noteData.length>1?this.noteData[1]?.code:null,icd3:this.noteData.length>2?this.noteData[2]?.code:null,icd4:this.noteData.length>3?this.noteData[3]?.code:null}})}handleSubmit(){this.activeModal.close(this.diagnosisData)}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(pt),t.rXU(We),t.rXU(b.ok))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-sign-off"]],inputs:{noteData:"noteData",cptData:"cptData"},decls:33,vars:10,consts:[["tabindex","-1","aria-labelledby","modal-title","aria-hidden","true",1,"modal","fade","show","d-block"],[1,"modal-dialog","modal-md"],[1,"modal-content"],[1,"modal-header","custom-modal-header"],["id","modal-title",1,"modal-title"],[1,"card","custom-card","shadow-md"],[1,"card-body"],[1,"row"],["id","patients",1,"form-control","custom-ng-select",3,"items","bindLabel","bindValue","multiple","searchable","loading","ngModel","ngModelOptions","change","scrollToEnd","search","ngModelChange"],["ng-option-tmp",""],["ng-multi-label-tmp",""],[1,"table-responsive","mt-3"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"modal-footer","custom-modal-footer"],["type","button",1,"btn","btn-secondary","custom-btn-secondary",3,"click"],["type","button",1,"btn","btn-primary","custom-btn-primary",3,"click"],[1,"custom-option"],[1,"selected-items"],["style","color: black",4,"ngFor","ngForOf"],[2,"color","black"],["type","button",1,"close-btn",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t.EFF(5," CPT Details "),t.k0s()(),t.j41(6,"div",5)(7,"div",6)(8,"div",7)(9,"ng-select",8),t.bIt("change",function(r){return o.onSelectionChange(r)})("scrollToEnd",function(){return o.loadMoreItems()})("search",function(r){return o.onSearch(r)})("ngModelChange",function(r){return o.patientSelectedIds=r}),t.DNE(10,jl,2,2,"ng-template",9),t.DNE(11,$l,2,1,"ng-template",10),t.k0s(),t.j41(12,"div",11)(13,"table",12)(14,"thead")(15,"tr")(16,"th"),t.EFF(17,"CPT"),t.k0s(),t.j41(18,"th"),t.EFF(19,"ICD1"),t.k0s(),t.j41(20,"th"),t.EFF(21,"ICD2"),t.k0s(),t.j41(22,"th"),t.EFF(23,"ICD3"),t.k0s(),t.j41(24,"th"),t.EFF(25,"ICD4"),t.k0s()()(),t.j41(26,"tbody"),t.DNE(27,Hl,11,5,"tr",13),t.k0s()()()()()(),t.j41(28,"div",14)(29,"button",15),t.bIt("click",function(){return o.handleClose()}),t.EFF(30," Close "),t.k0s(),t.j41(31,"button",16),t.bIt("click",function(){return o.handleSubmit()}),t.EFF(32," Confirm "),t.k0s()()()()()),2&i&&(t.R7$(9),t.Y8G("items",o.diagnosisList)("bindLabel","desc")("bindValue","_id")("multiple",!0)("searchable",!0)("loading",o.loading)("ngModel",o.patientSelectedIds)("ngModelOptions",t.lJ4(9,Ul)),t.R7$(18),t.Y8G("ngForOf",o.tableData))},dependencies:[f.Sq,b.BC,b.vS,ie.vr,ie.Uq,ie.EY],styles:[".custom-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f8f9fa;border-bottom:2px solid #007bff;padding:15px 20px}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#007bff;margin:0}.btn-close[_ngcontent-%COMP%]{background-color:#ff4d4f;border:none;color:#fff;padding:5px 10px;font-size:1.2rem;cursor:pointer;border-radius:4px;transition:background-color .3s ease}.btn-close[_ngcontent-%COMP%]:hover{background-color:#c00}.custom-modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;background-color:#f8f9fa;border-top:2px solid #007bff;padding:15px 20px}.custom-btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border:none;color:#fff;padding:10px 15px;font-size:1rem;border-radius:4px;transition:background-color .3s ease}.custom-btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.custom-btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:10px 15px;font-size:1rem;border-radius:4px;transition:background-color .3s ease;margin-left:10px}.custom-btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.custom-card[_ngcontent-%COMP%]{border-radius:0;background-color:#fff}.section-title[_ngcontent-%COMP%]{font-size:1.2rem;color:#000;margin-bottom:15px}.card[_ngcontent-%COMP%]{margin-bottom:0!important}.custom-ng-select-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px auto;position:relative}.ng-select[_ngcontent-%COMP%]{width:100%;border-radius:12px;font-size:16px;box-shadow:0 4px 6px #0000001a}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{min-height:60px;border:2px solid #007bff;border-radius:12px;background-color:#f9f9f9;display:flex;align-items:center}.ng-select[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;padding-left:10px}.ng-select[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;padding:5px}.ng-select[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#e3f2fd;border:1px solid #90caf9;border-radius:16px;padding:5px 10px;display:flex;align-items:center;gap:5px;font-size:14px}.ng-select[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;color:red;cursor:pointer;transition:color .3s}.ng-select[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#c62828}.ng-select[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 10px #0003}.ng-select[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]{font-size:16px;padding:10px 15px;transition:background-color .3s,color .3s}.ng-select[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.ng-select[_ngcontent-%COMP%]   .ng-option.ng-option-selected[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#007bff}.ng-select.form-control[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem;line-height:1.5;border:1px solid #ced4da;border-radius:.25rem;box-shadow:inset 0 1px 2px #00000013}.ng-select.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background-color:#f8f9fa;border:1px solid #ced4da;border-radius:.25rem;padding:.25rem .5rem;margin-right:.25rem}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-left:.5rem;border:none;background:none;cursor:pointer;font-size:1rem;color:#dc3545;transition:color .3s}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#a71d2a}.ng-dropdown-panel[_ngcontent-%COMP%]{z-index:1050;position:absolute;max-height:300px;overflow-y:auto}.custom-ng-select-container[_ngcontent-%COMP%]{position:relative;overflow:visible}.custom-ng-select[_ngcontent-%COMP%]{--background: white;--border-color: #ccc;--option-hover-color: #f1f1f1;--text-color: black;width:100%}.custom-option[_ngcontent-%COMP%]{padding:10px;background-color:var(--background);color:var(--text-color);border:1px solid var(--border-color);margin:5px 0;border-radius:5px;transition:background-color .3s ease;cursor:pointer}.custom-option[_ngcontent-%COMP%]:hover{background-color:var(--option-hover-color)}.ng-dropdown-panel[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;background-color:var(--background);border:1px solid var(--border-color);border-radius:5px;padding:5px;box-shadow:0 2px 8px #0003}.selected-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:red;font-size:14px;margin-left:5px;cursor:pointer}.custom-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.custom-modal[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;text-align:center;max-width:400px;width:100%;box-shadow:0 4px 6px #0000001a}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:20px}.modal-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;cursor:pointer;border-radius:4px}.modal-actions[_ngcontent-%COMP%]   .btn.cancel[_ngcontent-%COMP%]{background-color:#ccc}.modal-actions[_ngcontent-%COMP%]   .btn.confirm[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}"]})}}return n})();function Ll(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Chief Complaint is required. "),t.k0s())}function Yl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Chief Complaint must be at least 3 characters. "),t.k0s())}function zl(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,Ll,2,0,"div",68),t.DNE(2,Yl,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("chiefComplaint"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("chiefComplaint"))||null==o.errors?null:o.errors.minlength)}}function Wl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," History is required. "),t.k0s())}function Xl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," History must be at least 3 characters. "),t.k0s())}function Jl(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,Wl,2,0,"div",68),t.DNE(2,Xl,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("history"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("history"))||null==o.errors?null:o.errors.minlength)}}function Ql(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Review of System is required. "),t.k0s())}function ql(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Review of System must be at least 3 characters. "),t.k0s())}function Kl(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,Ql,2,0,"div",68),t.DNE(2,ql,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("ros"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("ros"))||null==o.errors?null:o.errors.minlength)}}function Zl(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Social History is required. "),t.k0s())}function ec(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Social History must be at least 3 characters. "),t.k0s())}function tc(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,Zl,2,0,"div",68),t.DNE(2,ec,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("social_history"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("social_history"))||null==o.errors?null:o.errors.minlength)}}function nc(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Allergies is required. "),t.k0s())}function ic(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Allergies must be at least 3 characters. "),t.k0s())}function oc(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,nc,2,0,"div",68),t.DNE(2,ic,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("allergies"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("allergies"))||null==o.errors?null:o.errors.minlength)}}function sc(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Current Medication is required. "),t.k0s())}function ac(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Current Medication must be at least 3 characters. "),t.k0s())}function rc(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,sc,2,0,"div",68),t.DNE(2,ac,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("currentMedication"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("currentMedication"))||null==o.errors?null:o.errors.minlength)}}function lc(n,s){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s(),t.j41(15,"td"),t.EFF(16),t.k0s()()),2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.date),t.R7$(2),t.JRh(e.weight),t.R7$(2),t.JRh(e.height),t.R7$(2),t.JRh(e.temp),t.R7$(2),t.Lme("",e.bpSys,"/ ",e.bpDia,""),t.R7$(2),t.JRh(e.pulse),t.R7$(2),t.JRh(e.rr),t.R7$(2),t.JRh(e.bmi)}}function cc(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Physical is required. "),t.k0s())}function dc(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Physical must be at least 3 characters. "),t.k0s())}function uc(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,cc,2,0,"div",68),t.DNE(2,dc,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("physical"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("physical"))||null==o.errors?null:o.errors.minlength)}}function pc(n,s){if(1&n&&(t.j41(0,"div",69),t.EFF(1),t.k0s()),2&n){const e=s.item;t.R7$(1),t.Lme(" (",e.code,") ",e.desc," ")}}function hc(n,s){if(1&n){const e=t.RV6();t.j41(0,"span",72),t.EFF(1),t.j41(2,"button",73),t.bIt("click",function(){const a=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.removeItem(a))}),t.EFF(3," \u2716 "),t.k0s()()}if(2&n){const e=s.$implicit;t.R7$(1),t.Lme(" (",e.code,") ",e.desc," ")}}function _c(n,s){if(1&n&&(t.j41(0,"div",70),t.DNE(1,hc,4,2,"span",71),t.k0s()),2&n){const e=s.items;t.R7$(1),t.Y8G("ngForOf",e)}}function gc(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Plan is required. "),t.k0s())}function fc(n,s){1&n&&(t.j41(0,"div"),t.EFF(1," Plan must be at least 3 characters. "),t.k0s())}function mc(n,s){if(1&n&&(t.j41(0,"div",67),t.DNE(1,gc,2,0,"div",68),t.DNE(2,fc,2,0,"div",68),t.k0s()),2&n){const e=t.XpG();let i,o;t.R7$(1),t.Y8G("ngIf",null==(i=e.getControl("plan"))||null==i.errors?null:i.errors.required),t.R7$(1),t.Y8G("ngIf",null==(o=e.getControl("plan"))||null==o.errors?null:o.errors.minlength)}}const ae=function(n){return{"is-invalid":n}},Di=function(){return{standalone:!0}},vc=[{path:"",component:ki.C,children:[{path:"notelist",component:Gi},{path:"noteadd",component:(()=>{class n{constructor(e,i,o,a,r){this.modalService=e,this.fb=i,this.notesService=o,this.route=a,this.location=r,this.isFieldDisabled=!0,this.diagnosisList=[],this.currentPage=1,this.limit=20,this.loading=!1,this.searchQuery="",this.searchSubject=new x.B,this.patientSelectedIds=[],this.tableData=[],this.textAreaData="",this.diagnosisData=[],this.patientId=null,this.editNoteId=null,this.medicationData=[],this.cptData=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{this.patientId=e.patientId,this.editNoteId=e.notesId}),this.notesForm=this.fb.group({chiefComplaint:["",[b.k0.required,b.k0.minLength(3)]],history:["",[b.k0.required,b.k0.minLength(3)]],ros:["",[b.k0.required,b.k0.minLength(3)]],social_history:["",[b.k0.required,b.k0.minLength(3)]],allergies:["",[b.k0.required,b.k0.minLength(3)]],currentMedication:["",[b.k0.required,b.k0.minLength(3)]],physical:["",[b.k0.required,b.k0.minLength(3)]],plan:["",[b.k0.required,b.k0.minLength(3)]],weight:[""],height:[""],temp:[""],bpSys:[""],bpDia:[""],pulse:[""],rr:[""],bmi:[""],date:[(new Date).toLocaleDateString()]}),this.getDiagnosis(),this.searchSubject.pipe((0,vt.B)(300),(0,Xe.F)()).subscribe(e=>{this.searchQuery=e,this.currentPage=1,this.diagnosisList=[],this.getDiagnosis()}),this.editNoteId&&this.notesService.getHistoryNotesById(this.editNoteId).subscribe(e=>{200==e.statusCode&&(this.notesForm.patchValue({chiefComplaint:e.data.chief_complaint,history:e.data.history_illness,ros:e.data.ros,social_history:e.data.social_history,allergies:e.data.allergies,currentMedication:e.data.medication,physical:e.data.physical_details,plan:e.data.plan}),this.tableData=e.data.physical_exam,e.data.diagnosis.length>0&&(this.patientSelectedIds=e.data.diagnosis.filter(i=>null!=i._id).map(i=>i._id),this.diagnosisData=e.data.diagnosis,this.textAreaData=e.data.diagnosis.map(i=>`${i.code}: ${i.desc}`).join("\n"),this.diagnosisList=[...new Set([...this.diagnosisList,...this.diagnosisData])]),this.medicationData=e.data.medicationList,this.cptData=e.data.cptCode)},e=>{console.error("Error fetching diagnoses:",e)})}openModal(e,i=""){const o=this.modalService.open(Bl,{size:"lg"});o.componentInstance.noteType=e,console.log("noteData-1",this.medicationData),o.componentInstance.noteData="currentMedication"==e?this.medicationData:i,o.result.then(a=>{if(a){const r={};if("currentMedication"!=a.noteType)r[a.noteType]=a.notes;else{let l=a.notes.map(c=>`${c.PsnDrugDescription}`).join("\n");r[a.noteType]=l,this.medicationData=a.notes}this.notesForm.patchValue(r),console.log("noteData-2",this.medicationData)}}).catch(a=>console.log("Modal dismissed:",a))}getControl(e){return this.notesForm.get(e)}getDiagnosis(){this.loading=!0,this.notesService.getDiagnoses(this.currentPage,this.limit,this.searchQuery).subscribe(e=>{this.diagnosisList=1===this.currentPage?e.data.data:[...this.diagnosisList,...e.data.data],this.loading=!1},e=>{console.error("Error fetching diagnoses:",e),this.loading=!1})}onSearch(e){this.searchSubject.next(e.term)}loadMoreItems(){this.currentPage++,this.getDiagnosis()}onSelectionChange(e=[]){this.diagnosisData=[],this.textAreaData=e.map(i=>`${i.code}: ${i.desc}`).join("\n"),this.diagnosisData=e}removeItem(e){console.log("item",e),this.patientSelectedIds=this.patientSelectedIds.filter(i=>i!==e._id),this.diagnosisData=this.diagnosisData.filter(i=>i._id!==e._id),this.diagnosisList=[...new Set([...this.diagnosisList,...this.diagnosisData])],this.textAreaData=this.diagnosisData.map(i=>`${i.code}: ${i.desc}`).join("\n")}updateTableEntry(){const e={date:this.notesForm.value.date,...this.notesForm.value},i=["date","weight","height","temp","bpSys","bpDia","pulse","rr","bmi"],o=Object.fromEntries(Object.entries(e).filter(([r])=>i.includes(r)));if(o.weight&&o.height){const c=703*parseFloat(o.weight.toString())/parseFloat(o.height.toString())**2;o.bmi=c.toFixed(2),this.notesForm.get("bmi")?.setValue(c.toFixed(2))}const a=this.tableData.findIndex(r=>r.date===o.date);-1!==a?this.tableData[a]=o:this.tableData.push(o)}openSignOffModal(){if(console.log(this.notesForm.valid,"notesForm",this.notesForm),this.notesForm.valid){const e=this.modalService.open(Vl,{size:"md"});e.componentInstance.noteData=this.diagnosisData,e.componentInstance.cptData=this.cptData,e.result.then(i=>{if(this.cptData=i,i&&i.length>0){let o={user_id:this.patientId,chief_complaint:this.notesForm.get("chiefComplaint")?.value||null,history_illness:this.notesForm.get("history")?.value||null,ros:this.notesForm.get("ros")?.value||null,social_history:this.notesForm.get("social_history")?.value||null,allergies:this.notesForm.get("allergies")?.value||null,medication:this.notesForm.get("currentMedication")?.value||null,plan:this.notesForm.get("plan")?.value||null,physical_exam:this.tableData,diagnosis:this.diagnosisData,cptCode:i,physical_details:this.notesForm.get("physical")?.value||null,medicationList:this.medicationData};this.notesService.addHistoryNotes(o).subscribe({next:a=>{200==a.statusCode&&(console.log("Item added successfully:",a),this.location.back())},error:a=>{console.error("Error adding item:",a)}})}}).catch(i=>console.log("Modal dismissed:",i))}else console.log("noteForm",this.notesForm),this.notesForm.markAllAsTouched()}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(ci),t.rXU(b.ok),t.rXU(We),t.rXU(ke.nX),t.rXU(f.aZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-notesadd"]],decls:140,vars:47,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"container","mt-4"],[1,"card","shadow-sm"],[1,"card-body"],[3,"formGroup"],[1,"col-md-6"],[1,"form-group","mb-3"],["for","chiefComplaint"],["type","text","id","chiefComplaint","formControlName","chiefComplaint",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","history"],["id","history","rows","6","formControlName","history",1,"form-control",3,"ngClass","dblclick"],["for","review"],["id","review","rows","6","formControlName","ros",1,"form-control",3,"ngClass","dblclick"],["for","socialHistory"],["id","socialHistory","rows","6","formControlName","social_history",1,"form-control",3,"ngClass","dblclick"],["for","allergies"],["id","allergies","rows","6","formControlName","allergies",1,"form-control",3,"ngClass","dblclick"],["for","currentMedication"],["id","currentMedication","rows","6","formControlName","currentMedication",1,"form-control",3,"ngClass","dblclick"],["for","Physical Exam"],[1,"row","g-2","mt-1"],[1,"col-6"],[1,"input-container"],["type","number","formControlName","weight","id","weight","placeholder"," ",1,"form-control",3,"keyup"],["for","weight",1,"floating-label"],["type","number","formControlName","height","id","height","placeholder"," ",1,"form-control",3,"keyup"],["for","height",1,"floating-label"],["type","number","formControlName","temp","id","temp","placeholder"," ",1,"form-control",3,"keyup"],["for","temp",1,"floating-label"],[1,"col-6","d-flex","align-items-center"],[1,"input-container","me-1"],["type","number","formControlName","bpSys","id","bpSys","placeholder"," ",1,"form-control",3,"keyup"],["for","bpSys",1,"floating-label"],[1,"input-container","ms-1"],["type","number","formControlName","bpDia","id","bpDia","placeholder"," ",1,"form-control",3,"keyup"],["for","bpDia",1,"floating-label"],["type","number","formControlName","pulse","id","pulse","placeholder"," ",1,"form-control",3,"keyup"],["for","pulse",1,"floating-label"],["type","number","formControlName","rr","id","rr","placeholder","",1,"form-control",3,"keyup"],["for","rr",1,"floating-label"],["type","number","formControlName","bmi","id","bmi","placeholder"," ",1,"form-control",3,"keyup"],["for","bmi",1,"floating-label"],[1,"table-responsive","mt-3"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],["for","assessment"],["id","assessment","rows","6","formControlName","physical",1,"form-control",3,"ngClass","dblclick"],["id","patients",1,"form-control","custom-ng-select",3,"items","bindLabel","bindValue","multiple","searchable","loading","ngModel","ngModelOptions","change","scrollToEnd","search","ngModelChange"],["ng-option-tmp",""],["ng-multi-label-tmp",""],["id","assessment","rows","6",1,"form-control",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["for","plan"],["id","plan","rows","6","formControlName","plan",1,"form-control",3,"ngClass","dblclick"],[1,"mt-3","d-flex","justify-content-end"],[1,"btn","btn-primary"],[1,"mt-0"],[1,"btn","btn-primary",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],[1,"custom-option"],[1,"selected-items"],["style","color: black",4,"ngFor","ngForOf"],[2,"color","black"],["type","button",1,"close-btn",3,"click"]],template:function(i,o){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t.EFF(8,"Patients"),t.k0s()(),t.j41(9,"li",6),t.nrm(10,"i",8),t.k0s(),t.j41(11,"li",9),t.EFF(12,"Add Patients Notes"),t.k0s()()()()(),t.j41(13,"div",10)(14,"div",11)(15,"div",12)(16,"form",13)(17,"div",3)(18,"div",14)(19,"div",15)(20,"label",16),t.EFF(21,"Chief Complaint"),t.k0s(),t.nrm(22,"input",17),t.DNE(23,zl,3,2,"div",18),t.k0s(),t.j41(24,"div",15)(25,"label",19),t.EFF(26,"History of Present Illness"),t.k0s(),t.j41(27,"textarea",20),t.bIt("dblclick",function(){let r;return o.openModal("history",null==(r=o.notesForm.get("history"))?null:r.value)}),t.k0s(),t.DNE(28,Jl,3,2,"div",18),t.k0s(),t.j41(29,"div",15)(30,"label",21),t.EFF(31,"Review of System"),t.k0s(),t.j41(32,"textarea",22),t.bIt("dblclick",function(){let r;return o.openModal("ros",null==(r=o.notesForm.get("ros"))?null:r.value)}),t.k0s(),t.DNE(33,Kl,3,2,"div",18),t.k0s(),t.j41(34,"div",15)(35,"label",23),t.EFF(36,"Social History"),t.k0s(),t.j41(37,"textarea",24),t.bIt("dblclick",function(){let r;return o.openModal("social_history",null==(r=o.notesForm.get("social_history"))?null:r.value)}),t.k0s(),t.DNE(38,tc,3,2,"div",18),t.k0s(),t.j41(39,"div",15)(40,"label",25),t.EFF(41,"Allergies"),t.k0s(),t.j41(42,"textarea",26),t.bIt("dblclick",function(){let r;return o.openModal("allergies",null==(r=o.notesForm.get("allergies"))?null:r.value)}),t.k0s(),t.DNE(43,oc,3,2,"div",18),t.k0s(),t.j41(44,"div",15)(45,"label",27),t.EFF(46,"Current Medication"),t.k0s(),t.j41(47,"textarea",28),t.bIt("dblclick",function(){let r;return o.openModal("currentMedication",null==(r=o.notesForm.get("currentMedication"))?null:r.value)}),t.k0s(),t.DNE(48,rc,3,2,"div",18),t.k0s()(),t.j41(49,"div",14)(50,"label",29),t.EFF(51,"Physical Exam"),t.k0s(),t.j41(52,"div",30)(53,"div",31)(54,"div",32)(55,"input",33),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(56,"label",34),t.EFF(57,"Weight (lb)"),t.k0s()()(),t.j41(58,"div",31)(59,"div",32)(60,"input",35),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(61,"label",36),t.EFF(62,"Height (in)"),t.k0s()()(),t.j41(63,"div",31)(64,"div",32)(65,"input",37),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(66,"label",38),t.EFF(67,"Temp (\xb0F)"),t.k0s()()(),t.j41(68,"div",39)(69,"div",40)(70,"input",41),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(71,"label",42),t.EFF(72,"BP (Sys)"),t.k0s()(),t.j41(73,"span"),t.EFF(74,"/"),t.k0s(),t.j41(75,"div",43)(76,"input",44),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(77,"label",45),t.EFF(78,"BP (Dia)"),t.k0s()()(),t.j41(79,"div",31)(80,"div",32)(81,"input",46),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(82,"label",47),t.EFF(83,"Pulse"),t.k0s()()(),t.j41(84,"div",31)(85,"div",32)(86,"input",48),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(87,"label",49),t.EFF(88,"RR"),t.k0s()()(),t.j41(89,"div",31)(90,"div",32)(91,"input",50),t.bIt("keyup",function(){return o.updateTableEntry()}),t.k0s(),t.j41(92,"label",51),t.EFF(93,"BMI"),t.k0s()()()(),t.j41(94,"div",52)(95,"table",53)(96,"thead")(97,"tr")(98,"th"),t.EFF(99,"Date"),t.k0s(),t.j41(100,"th"),t.EFF(101,"Weight (lb)"),t.k0s(),t.j41(102,"th"),t.EFF(103,"Height (in)"),t.k0s(),t.j41(104,"th"),t.EFF(105,"Temp (\xb0F)"),t.k0s(),t.j41(106,"th"),t.EFF(107,"BP"),t.k0s(),t.j41(108,"th"),t.EFF(109,"Pulse"),t.k0s(),t.j41(110,"th"),t.EFF(111,"RR"),t.k0s(),t.j41(112,"th"),t.EFF(113,"BMI"),t.k0s()()(),t.j41(114,"tbody"),t.DNE(115,lc,17,9,"tr",54),t.k0s()()(),t.j41(116,"div",15)(117,"label",55),t.EFF(118,"Physical"),t.k0s(),t.j41(119,"textarea",56),t.bIt("dblclick",function(){let r;return o.openModal("physical",null==(r=o.notesForm.get("physical"))?null:r.value)}),t.k0s(),t.DNE(120,uc,3,2,"div",18),t.k0s(),t.j41(121,"div",15)(122,"ng-select",57),t.bIt("change",function(r){return o.onSelectionChange(r)})("scrollToEnd",function(){return o.loadMoreItems()})("search",function(r){return o.onSearch(r)})("ngModelChange",function(r){return o.patientSelectedIds=r}),t.DNE(123,pc,2,2,"ng-template",58),t.DNE(124,_c,2,1,"ng-template",59),t.k0s()(),t.j41(125,"div",15)(126,"label",55),t.EFF(127,"Assessment Show"),t.k0s(),t.j41(128,"textarea",60),t.bIt("ngModelChange",function(r){return o.textAreaData=r}),t.k0s()(),t.j41(129,"div",15)(130,"label",61),t.EFF(131,"Plan"),t.k0s(),t.j41(132,"textarea",62),t.bIt("dblclick",function(){let r;return o.openModal("plan",null==(r=o.notesForm.get("plan"))?null:r.value)}),t.k0s(),t.DNE(133,mc,3,2,"div",18),t.k0s(),t.j41(134,"div",63)(135,"button",64),t.EFF(136,"Current Medication"),t.k0s()()()(),t.j41(137,"div",65)(138,"button",66),t.bIt("click",function(){return o.openSignOffModal()}),t.EFF(139,"Sign Off"),t.k0s()()()()()()()()),2&i){let a,r,l,c,u,d,_,p,h,D,m,g,C,y,w,v;t.R7$(16),t.Y8G("formGroup",o.notesForm),t.R7$(6),t.Y8G("ngClass",t.eq3(29,ae,(null==(a=o.getControl("chiefComplaint"))?null:a.touched)&&(null==(a=o.getControl("chiefComplaint"))?null:a.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(r=o.getControl("chiefComplaint"))?null:r.touched)&&(null==(r=o.getControl("chiefComplaint"))?null:r.invalid)),t.R7$(4),t.Y8G("ngClass",t.eq3(31,ae,(null==(l=o.getControl("history"))?null:l.touched)&&(null==(l=o.getControl("history"))?null:l.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(c=o.getControl("history"))?null:c.touched)&&(null==(c=o.getControl("history"))?null:c.invalid)||(null==(c=o.getControl("history"))?null:c.errors)),t.R7$(4),t.Y8G("ngClass",t.eq3(33,ae,(null==(u=o.getControl("ros"))?null:u.touched)&&(null==(u=o.getControl("ros"))?null:u.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(d=o.getControl("ros"))?null:d.touched)&&(null==(d=o.getControl("ros"))?null:d.invalid)),t.R7$(4),t.Y8G("ngClass",t.eq3(35,ae,(null==(_=o.getControl("social_history"))?null:_.touched)&&(null==(_=o.getControl("social_history"))?null:_.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(p=o.getControl("social_history"))?null:p.touched)&&(null==(p=o.getControl("social_history"))?null:p.invalid)),t.R7$(4),t.Y8G("ngClass",t.eq3(37,ae,(null==(h=o.getControl("allergies"))?null:h.touched)&&(null==(h=o.getControl("allergies"))?null:h.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(D=o.getControl("allergies"))?null:D.touched)&&(null==(D=o.getControl("allergies"))?null:D.invalid)),t.R7$(4),t.Y8G("ngClass",t.eq3(39,ae,(null==(m=o.getControl("currentMedication"))?null:m.touched)&&(null==(m=o.getControl("currentMedication"))?null:m.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(g=o.getControl("currentMedication"))?null:g.touched)&&(null==(g=o.getControl("currentMedication"))?null:g.invalid)),t.R7$(67),t.Y8G("ngForOf",o.tableData),t.R7$(4),t.Y8G("ngClass",t.eq3(41,ae,(null==(C=o.getControl("physical"))?null:C.touched)&&(null==(C=o.getControl("physical"))?null:C.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(y=o.getControl("physical"))?null:y.touched)&&(null==(y=o.getControl("physical"))?null:y.invalid)),t.R7$(2),t.Y8G("items",o.diagnosisList)("bindLabel","desc")("bindValue","_id")("multiple",!0)("searchable",!0)("loading",o.loading)("ngModel",o.patientSelectedIds)("ngModelOptions",t.lJ4(43,Di)),t.R7$(6),t.Y8G("ngModel",o.textAreaData)("ngModelOptions",t.lJ4(44,Di))("disabled",o.isFieldDisabled),t.R7$(4),t.Y8G("ngClass",t.eq3(45,ae,(null==(w=o.getControl("plan"))?null:w.touched)&&(null==(w=o.getControl("plan"))?null:w.invalid))),t.R7$(1),t.Y8G("ngIf",(null==(v=o.getControl("plan"))?null:v.touched)&&(null==(v=o.getControl("plan"))?null:v.invalid))}},dependencies:[f.YU,f.Sq,f.bT,b.qT,b.me,b.Q0,b.BC,b.cb,b.vS,b.j4,b.JD,ie.vr,ie.Uq,ie.EY],styles:[".custom-ng-select-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px auto;position:relative}.ng-select[_ngcontent-%COMP%]{width:100%;border-radius:12px;font-size:16px;box-shadow:0 4px 6px #0000001a}.ng-select[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{min-height:60px;border:2px solid #007bff;border-radius:12px;background-color:#f9f9f9;display:flex;align-items:center}.ng-select[_ngcontent-%COMP%]   .ng-placeholder[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;padding-left:10px}.ng-select[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;padding:5px}.ng-select[_ngcontent-%COMP%]   .selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#e3f2fd;border:1px solid #90caf9;border-radius:16px;padding:5px 10px;display:flex;align-items:center;gap:5px;font-size:14px}.ng-select[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:14px;color:red;cursor:pointer;transition:color .3s}.ng-select[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#c62828}.ng-select[_ngcontent-%COMP%]   .ng-dropdown-panel[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 10px #0003}.ng-select[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]{font-size:16px;padding:10px 15px;transition:background-color .3s,color .3s}.ng-select[_ngcontent-%COMP%]   .ng-option[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.ng-select[_ngcontent-%COMP%]   .ng-option.ng-option-selected[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#007bff}.ng-select.form-control[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem;line-height:1.5;border:1px solid #ced4da;border-radius:.25rem;box-shadow:inset 0 1px 2px #00000013}.ng-select.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background-color:#f8f9fa;border:1px solid #ced4da;border-radius:.25rem;padding:.25rem .5rem;margin-right:.25rem}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-left:.5rem;border:none;background:none;cursor:pointer;font-size:1rem;color:#dc3545;transition:color .3s}.selected-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#a71d2a}.ng-dropdown-panel[_ngcontent-%COMP%]{z-index:1050;position:absolute;max-height:300px;overflow-y:auto}.custom-ng-select-container[_ngcontent-%COMP%]{position:relative;overflow:visible}.custom-ng-select[_ngcontent-%COMP%]{--background: white;--border-color: #ccc;--option-hover-color: #f1f1f1;--text-color: black;width:100%}.custom-option[_ngcontent-%COMP%]{padding:10px;background-color:var(--background);color:var(--text-color);border:1px solid var(--border-color);margin:5px 0;border-radius:5px;transition:background-color .3s ease;cursor:pointer}.custom-option[_ngcontent-%COMP%]:hover{background-color:var(--option-hover-color)}.ng-dropdown-panel[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;background-color:var(--background);border:1px solid var(--border-color);border-radius:5px;padding:5px;box-shadow:0 2px 8px #0003}.selected-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:red;font-size:14px;margin-left:5px;cursor:pointer}.input-container[_ngcontent-%COMP%]{position:relative;width:100%;margin-top:5px}.floating-label[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;transform:translateY(-50%);background:#fff;font-size:16px;color:#aaa;transition:all .3s ease;pointer-events:none}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 10px;border:2px solid #aaa;border-radius:5px;font-size:16px;background:#fff}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.form-control[_ngcontent-%COMP%]:focus + .floating-label[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:not(:placeholder-shown) + .floating-label[_ngcontent-%COMP%]{top:-2px;font-size:12px;color:#007bff;background:#fff;padding:0 5px}"]})}}return n})()}]}];let yc=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[ke.iI.forChild(vc),ke.iI]})}}return n})(),Dc=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[f.MD,yc,b.YN,b.X1,ie.MQ]})}}return n})()}}]);